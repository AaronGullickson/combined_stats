---
title: "Modeling Non-Linearity"
subtitle: "Modeling Complications, Sociology 513"
author: "Aaron Gullickson"
institute: "University of Oregon"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, uo, default-fonts]
    self_contained: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: ""
      ratio: 16:10
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(fig.retina = 3)
```

```{r loaddata, echo=FALSE, message=FALSE, error=FALSE}
library(stargazer)
library(ggplot2)
library(ggrepel)
library(gapminder)
library(pander)
library(broom)
library(corrgram)
library(psych)
load("example_datasets/movies/movies.RData")
load("example_datasets/sex/sex.RData")
load("example_datasets/crimes/crimes.RData")
load("example_datasets/titanic/titanic.RData")
load("example_datasets/politics/politics.RData")
load("example_datasets/add_health/addhealth_missing.RData")
load("example_datasets/nyc_nonprofit/nyc.RData")
load("example_datasets/misc/relig.RData")
load("example_datasets/esping_anderson/espinganderson.RData")
load("example_datasets/earnings/earnings.RData")
load("example_datasets/misc/pew.RData")
```

class: center, middle

# Linear models fit straight lines

```{r life-exp-non-linear, echo=FALSE, fig.width=12}
library(gapminder)
library(ggrepel)
ggplot(subset(gapminder, year==2007), aes(x=gdpPercap, y=lifeExp))+
  geom_point(alpha=0.7)+
  geom_smooth(method="lm", se=FALSE)+
  geom_text_repel(data=subset(gapminder, year==2007 & gdpPercap>5000 & lifeExp<60), 
                  aes(label=country), size=2)+
  labs(x="GDP per capita", y="Life expectancy at birth", subtitle = "2007 data from Gapminder")+
  scale_x_continuous(labels=scales::dollar)+
  theme_bw()
```

???

- If you try to model a relationship using a straight line when that relationship is more complex (i.e. "bendy") then your model will not fit well and will not represent the relationship accurately. 
- The technical way of saying this is that the functional form of the relationship is mis-specified in the model. 
- The most common cases of non-linearity are **diminishing returns** and **exponential** relationships, although more complex forms of non-linearity are also possible. 
- The example to the left shows a clear diminishing returns between life expectancy and GDP per capita.

---

class: center, middle

# Is this relationship non-linear?

```{r non-linear-movies, echo=FALSE, fig.width=12}
ggplot(movies, aes(x=TomatoRating, y=BoxOffice))+
  geom_jitter(alpha=0.5)+
  scale_y_continuous(labels = scales::dollar)+
  labs(x="Rotten Tomatoes Rating", y="Box Office Returns (millions)")+
  theme_bw()
```

---

Transparency (by setting `alpha` only seems to work if I turn off `self-contained` which is annoying. I should check and see if there is some other way to do this. 

---

Something else

